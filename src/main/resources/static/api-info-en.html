<!doctype html> <html lang="en"> <head> <meta charset="utf-8"> <title>api document</title> <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"> <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgo="> <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css"> <style type="text/css"> html { position: relative; min-height: 100%; } body { font-size: 16px; } header { position: sticky; top: 0; height: 50px; width: 100%; z-index: 999; transition: all .3s ease-in-out; background-color: transparent; border-bottom: 1px solid #f7f8f8; display: flex; } header.scrolled { box-shadow: 0 0 10px -2px #333; background: rgba(255,255,255,0.94); } .anchor { display: block; position: relative; top: -51px; visibility: hidden; width: 0; height: 0; } pre { font-size: 14px; margin: 0 0 14px; padding: 7px 14px; overflow: auto; max-height: 546px; } pre .line-number { color: #2B91AF; float: left; margin: 0 14px 0 -14px; border-right: 1px solid; text-align: right; padding: 0 7px 0 14px; } pre .source { } pre .comment { color: #998; font-style: italic; } table thead tr th { white-space: nowrap; } .header { display: flex; } .header-content { display: flex; align-items: center; flex-grow: 1; font-size: 26px; color: #6495ed; overflow: hidden; white-space: nowrap; } .header-select, .header-text { display: flex; align-items: center; flex-grow: 0; } .header-text { white-space: nowrap; padding: 0 5px 0 20px; } .project-choose { min-width: 200px; } .footer { position: absolute; height: 133px; width: 100%; background: #f5f5f5; padding: 10px; } .footer > p { margin: 5px 0; text-align: center; } .config { margin-top: 10px; } .config .config-prefix { color: #5f9ea0; cursor: pointer; } .panel { overflow: auto; } .module, .module-last {} .module-name { border-bottom: 5px solid #eee; margin-bottom: -5px; } .module-api { border-bottom: 1px solid #eee; padding-bottom: 5px; } .module-last > .module-api:last-child { border-bottom: none; } .module-api-index {} .module-api-info {} .module-api-info-basic {} .module-api-info-desc {} .module-api-info-param {} .module-api-info-return {} .bottom-table { margin-bottom: 10px; } .text-left { vertical-align: middle !important; } .response-example { color: #337ab7; text-decoration: none; background-color: transparent; cursor: pointer; } .response-example:focus, .response-example:hover { color: #23527c; text-decoration: underline; } #config-prefix .modal-dialog { top: 85px; } .modal-dialog { width: 75%; } .bold { font-weight: bold !important; } .wrap { white-space: pre-wrap; } .red { color: red !important; } .copy-status { right: 0; position: absolute; color: rgba(255, 0, 0, .8); margin: 7px 14px 0 0; padding-right: 65px; } .copy { right: 0; position: absolute; cursor: pointer; color: rgba(140, 140, 140, .8); margin: 7px 14px 0 0; padding-right: 14px; transition: color .1s; } .copy:hover { color: rgb(100, 100, 100); font-weight: bold; } .copy-impl { opacity: 0; width: 0 !important; height: 0 !important; } .col-md-3, .col-md-9 { transition: width .5s ease; } .right-arrow { position: fixed; top: calc(50px + 1px + 15px); right: 0; border-radius: 26px 0 0 26px; box-shadow: -1px 0 6px rgba(0,0,0,.2); width: 26px; height: 26px; cursor: pointer; background: #fff; z-index: 2; } .right-arrow .img { width: 26px; height: 26px; transition: transform .5s ease; } .bs-docs-sidebar { width: inherit; position: fixed; margin: 15px 0; } .bs-docs-sidebar > .nav { overflow-y: auto; max-height: calc(100vh - 51px - 15px - 15px); } .bs-docs-sidebar .nav > li > a { display: block; padding: 4px 0 4px 20px; font-size: 14px; font-weight: 500; color: #999; } .bs-docs-sidebar .nav > li > a:hover, .bs-docs-sidebar .nav > li > a:focus { padding-left: 19px; color: #A1283B; text-decoration: none; background-color: transparent; border-left: 1px solid #A1283B; } .bs-docs-sidebar .nav > .active > a, .bs-docs-sidebar .nav > .active:hover > a, .bs-docs-sidebar .nav > .active:focus > a { padding-left: 18px; font-weight: bold; color: #A1283B; background-color: transparent; border-left: 2px solid #A1283B; } .bs-docs-sidebar .nav .nav { display: none; padding-bottom: 10px; } .bs-docs-sidebar .nav .nav > li > a { padding-top: 1px; padding-bottom: 1px; padding-left: 30px; font-size: 12px; font-weight: normal; } .bs-docs-sidebar .nav .nav > li > a:hover, .bs-docs-sidebar .nav .nav > li > a:focus { padding-left: 29px; } .bs-docs-sidebar .nav .nav > .active > a, .bs-docs-sidebar .nav .nav > .active:hover > a, .bs-docs-sidebar .nav .nav > .active:focus > a { padding-left: 28px; font-weight: 500; } .bs-docs-sidebar .nav .nav .nav { padding-bottom: 10px; } .bs-docs-sidebar .nav .nav .nav > li > a { padding-top: 1px; padding-bottom: 1px; padding-left: 40px; font-size: 12px; font-weight: normal; } .bs-docs-sidebar .nav .nav .nav > li > a:hover, .bs-docs-sidebar .nav .nav .nav > li > a:focus { padding-left: 39px; } .bs-docs-sidebar .nav > .active > ul { display: block; } .bs-docs-sidebar .nav .nav .nav > .active > a, .bs-docs-sidebar .nav .nav .nav > .active:hover > a, .bs-docs-sidebar .nav .nav .nav > .active:focus > a { padding-left: 38px; font-weight: 500; } @media print { pre .line-number, .print-nil { display: none; } pre, .text-left, .panel { overflow: unset; } pre, .text-left { white-space: pre-wrap; } } @media (max-width: 992px), print { .col-md-9 { width: 100%; } .right-arrow, .col-md-3 { display: none; } } @media (max-width: 992px) { .modal-dialog { width: 95%; } } @media (max-width: 768px) { .container { width: 100%; } } @media (min-width: 993px) and (max-width: 1200px) { .bs-docs-sidebar { padding-left: 10px; width: calc(25% - 10px - 3px); } } @media (min-width: 1201px) { .bs-docs-sidebar { padding-left: 20px; width: calc(25% - 20px - 3px); } } </style> </head> <body> <div id="config-prefix" class="modal fade" tabindex="-1" aria-hidden="true"> <div class="modal-dialog modal-lg modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal">&times;</button> <h4 class="modal-title">Config request prefix(When use context-path)</h4> </div> <div class="modal-body"> <input id="prefix-url" class="form-control" placeholder="for example: http://www.example.com/context"/> </div> <div class="modal-footer"> <button type="button" class="config-btn btn btn-info">submit</button> <button type="button" class="btn btn-default" data-dismiss="modal">close</button> </div> </div> </div> <header class="print-nil"> <div class="header container"> <div class="header-content"></div> </div> </header> <script id="choose-project" type="text/x-dot-template"> <div class="header-text">Choose project:</div> <div class="header-select"> <select class="project-choose form-control" name="p"> <option value="">Current</option> {{ var cp = it.project; }} {{~ it.projects :p}} {{ var s = (cp.toLowerCase() === p[0].toLowerCase() || cp === p[1]) ? ' selected' : ''; }} <option value="{{= p[0]}}" data-url="{{= p[2]}}"{{= s}}>{{= p[1]}}</option> {{~}} </select> </div> </script> <main class="container"> <div class="row"> <div id="url-info" class="col-md-9"></div> <script id="url-render" type="text/x-dot-template"> {{~ it.moduleList :module:index}} <div class="{{= index + 1 === it.moduleList.length ? 'module-last' : 'module'}}"> <span id="{{= module.name}}" class="anchor"></span> <h2 class="module-name"> <span>{{= index + 1}}</span> {{= module.info || ''}} </h2> {{~ module.urlList :url:urlIndex}} <div class="module-api"> <span id="{{= module.name}}-{{= url.id}}" class="anchor"></span> <h3 class="module-api-index"> <span>{{= index + 1}}.{{= urlIndex + 1}}</span> {{= url.title || ''}} </h3> <div class="module-api-info"> <p class="module-api-info-basic">request <code>{{= url.method || ''}} {{= url.url || ''}}</code></p> {{ var moduleDesc = ''; if (url.develop && url.develop !== '') { moduleDesc += 'Develop: ' + url.develop; } if (url.desc && url.desc !== '') { if (moduleDesc !== '') { moduleDesc += '<br>'; } moduleDesc += 'Comment: ' + url.desc; } var printNil = ''; if (url.exampleUrl && url.exampleUrl != '') { var example = '<a target="_blank" href="' + url.exampleUrl + '">Result example</a>'; if (moduleDesc !== '') { moduleDesc += '<span class="print-nil"><br><br>' + example + '</span>'; } else { printNil = ' print-nil'; moduleDesc += example; } } }} <pre class="module-api-info-desc{{= printNil}}">{{= moduleDesc}}</pre> {{ var globalParamList = it.tokenList || []; var urlParamList = url.paramList || []; var paramList = String(url.useGlobalParam) === '1' ? globalParamList.concat(urlParamList) : urlParamList; var hasDesc = false, hasExample = false, hasHeader = false; for (var i = 0; i < paramList.length; i++) { var paramDesc = paramList[i].desc; if (paramDesc !== undefined && paramDesc !== null && paramDesc !== '') { hasDesc = true; } var urlExample = paramList[i].example; if (urlExample !== undefined && urlExample !== null && urlExample !== '') { hasExample = true; } if (String(paramList[i].paramType) === '1') { hasHeader = true; } } }} {{? paramList && paramList.length > 0}} <div class="module-api-info-param bottom-table panel panel-default"> <table class="table table-striped table-bordered table-hover table-condensed"> <thead> <tr> <th class="text-left">Param name</th> <th class="text-left">Data type</th> <th class="text-left">Required</th> {{? hasDesc}}<th class="text-left">Comment</th>{{?}} {{? hasExample}}<th class="text-left">Example</th>{{?}} {{? hasHeader}}<th class="text-left">Param type</th>{{?}} </tr> </thead> <tbody> {{~ paramList :param}} <tr{{? String(param.hasMust) === '1'}} class="bold"{{?}}{{? param.style && param.style !== ''}} style="{{= param.style}}"{{?}}> <td class="text-left">{{= param.name || ''}}</td> <td class="text-left">{{= param.showDataType !== undefined && param.showDataType !== null && param.showDataType !== '' ? param.showDataType : (param.dataType !== undefined && param.dataType !== null && param.dataType !== '' ? param.dataType : '') }}</td> <td class="text-left">{{= String(param.hasMust) === '1' ? 'Yes' : 'No'}}</td> {{? hasDesc}}<td class="text-left wrap">{{= param.desc || ''}}</td>{{?}} {{? hasExample}}<td class="text-left wrap">{{= param.example || ''}}</td>{{?}} {{? hasHeader}}<td class="text-left">{{= String(param.paramType) === '1' ? 'Header' : 'Query'}}</td>{{?}} </tr> {{~}} </tbody> </table> </div> {{?}} <div class="module-api-info-return"> <p>Return example & Comment</p> <div class="copy-status print-nil"></div> <div class="copy print-nil">Copy</div> <pre class="src src-json">{{= url.commentJson || ''}}</pre> {{? url.returnList && url.returnList.length > 0}} <div class="bottom-table panel panel-default"> <table class="table table-striped table-bordered table-hover table-condensed"> <thead> <tr> <th class="text-left">Return field name</th> <th class="text-left">Type</th> <th class="text-left">Comment</th> </tr> </thead> <tbody> {{~ url.returnList :rtn}} <tr> <td class="text-left">{{= rtn.name || ''}}</td> <td class="text-left">{{= rtn.type || ''}}</td> <td class="text-left wrap"> {{= (rtn.desc || '').replace(/(!!!RECURSIVE OBJECT!!!)/, '<span class="bold red">$1</span>')}} </td> </tr> {{~}} </tbody> </table> </div> {{?}} {{ var hasSelfResponse = false; var responseList; if (url.responseList && url.responseList.length > 0) { hasSelfResponse = true; responseList = url.responseList; } else if (it.responseList && it.responseList.length > 0) { responseList = it.responseList; } else { responseList = []; } var hasAction = false; for (var i = 0; i < responseList.length; i++) { var comment = responseList[i].comment; if (comment !== undefined && comment !== null && comment !== '') { hasAction = true; } } }} {{? responseList.length > 0}} <div class="bottom-table panel panel-default"> <table class="table table-striped table-bordered table-hover table-condensed"> <thead> <tr> <th class="text-left">Response Code</th> <th class="text-left">Comment</th> {{? hasAction}}<th class="text-left print-nil">Action</th>{{?}} </tr> </thead> <tbody> {{~ responseList :response}} <tr> <td class="text-left">{{= response.code || ''}}</td> <td class="text-left">{{= response.msg || ''}}</td> {{ var comment = response.comment; var targetId = hasSelfResponse ? (module.name + '-' + url.id + '-' + response.code) : ('global-' + response.code); }} {{? comment !== undefined && comment !== null && comment !== ''}} <td class="text-left print-nil"> <span class="response-example" title="click to view response {{= response.code + ': ' + response.msg}}" data-toggle="modal" data-target="#{{= targetId}}">View example</span> </td> {{?? hasAction}} <td class="text-left print-nil"></td> {{?}} </tr> {{~}} </tbody> </table> </div> {{? hasSelfResponse}} {{~ responseList :response}} {{ var comment = response.comment; }} {{? comment !== undefined && comment !== null && comment !== ''}} <div id="{{= module.name}}-{{= url.id}}-{{= response.code}}" class="modal fade" tabindex="-1" aria-hidden="true" data-backdrop="static" data-keyboard="false"> <div class="modal-dialog modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"> &times; </button> <h4 class="modal-title"> Module「{{= module.info || ''}}」api「{{= url.title || ''}}」response「{{= response.code + ': ' + response.msg}}」 </h4> </div> <div class="modal-body"> <div class="copy-status print-nil"></div> <div class="copy print-nil">Copy</div> <pre class="src src-json">{{= response.comment || ''}}</pre> {{? response.returnList && response.returnList.length > 0}} <div class="bottom-table panel panel-default"> <table class="table table-striped table-bordered table-hover table-condensed"> <thead> <tr> <th class="text-left">Field name</th> <th class="text-left">Type</th> <th class="text-left">Comment</th> </tr> </thead> <tbody> {{~ response.returnList :rtn}} <tr> <td class="text-left">{{= rtn.name || ''}}</td> <td class="text-left">{{= rtn.type || ''}}</td> <td class="text-left wrap"> {{= (rtn.desc || '').replace(/(!!!RECURSIVE OBJECT!!!)/, '<span class="bold red">$1</span>')}} </td> </tr> {{~}} </tbody> </table> </div> {{?}} </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> </div> </div> </div> {{?}} {{~}} {{?}} {{?}} </div> </div> </div> {{~}} </div> {{~}} {{~ it.responseList :response}} {{ var comment = response.comment; }} {{? comment !== undefined && comment !== null && comment !== ''}} <div id="global-{{= response.code}}" class="modal fade" tabindex="-1" aria-hidden="true" data-backdrop="static" data-keyboard="false"> <div class="modal-dialog modal-content"> <div class="modal-header"> <button type="button" class="close" data-dismiss="modal"> &times; </button> <h4 class="modal-title"> View example of global response「{{= response.code + ': ' + response.msg}}」 </h4> </div> <div class="modal-body"> <div class="copy-status print-nil"></div> <div class="copy print-nil">Copy</div> <pre class="src src-json">{{= response.comment || ''}}</pre> {{? response.returnList && response.returnList.length > 0}} <div class="bottom-table panel panel-default"> <table class="table table-striped table-bordered table-hover table-condensed"> <thead> <tr> <th class="text-left">Field name</th> <th class="text-left">Type</th> <th class="text-left">Comment</th> </tr> </thead> <tbody> {{~ response.returnList :rtn}} <tr> <td class="text-left">{{= rtn.name || ''}}</td> <td class="text-left">{{= rtn.type || ''}}</td> <td class="text-left wrap"> {{= (rtn.desc || '').replace(/(!!!RECURSIVE OBJECT!!!)/, '<span class="bold red">$1</span>')}} </td> </tr> {{~}} </tbody> </table> </div> {{?}} </div> <div class="modal-footer"> <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> </div> </div> </div> {{?}} {{~}} </script> <div class="right-arrow print-nil"> <svg viewBox="0 0 24 24" class="img"><path d="M8.59,16.59L13.17,12L8.59,7.41L10,6l6,6l-6,6L8.59,16.59z"/></svg> </div> <div class="col-md-3"> <div class="bs-docs-sidebar"> <ul id="url-nav-info" class="nav"></ul> <script id="url-nav-render" type="text/x-dot-template"> {{~ it.moduleList :module:index}} <li> <a href="#{{= module.name}}">{{= index + 1}} {{= module.info || ''}}</a> <ul class="nav"> {{~ module.urlList :url:urlIndex}} <li> <a href="#{{= module.name}}-{{= url.id}}">{{= index + 1}}.{{= urlIndex + 1}} {{= url.title || ''}}</a> </li> {{~}} </ul> </li> {{~}} </script> </div> </div> </div> </main> <footer></footer> <script id="copyright" type="text/x-dot-template"> <div class="footer"> <p class="version">Version: <span>{{= it.version || ''}}</span></p> <p class="statistics">{{= it.groupCount || ''}} module, {{= it.apiCount || ''}} api</p> <p class="team">{{= it.team || ''}}</p> <p class="copyright">&copy; {{= new Date().getFullYear()}} {{= it.copyright || ''}}</p> </div> </script> <!--[if lt IE 9]> <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/respond.js/1.4.2/respond.min.js"></script> <![endif]--> <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js"></script> <script src="//cdnjs.cloudflare.com/ajax/libs/dot/1.1.2/doT.min.js"></script> <script type="text/javascript"> function isBlank(str) { return str === undefined || str === null || str === 'undefined' || str === 'null' || str === ''; } function isNotBlank(str) { return !isBlank(str); } function hasEnter(event) { if (event.defaultPrevented) { return; } var handled; if (event.key !== undefined) { handled = event.key.toUpperCase() === 'ENTER'; } else if (event.keyIdentifier !== undefined) { handled = event.keyIdentifier.toUpperCase() === 'ENTER'; } else if (event.keyCode !== undefined) { handled = event.keyCode === 13 || event.keyCode === '13'; } else { handled = false; } if (handled) { event.preventDefault(); } return handled; } var localServerPathItem = 'prefix-url'; function newRequest() { var url = $('#prefix-url').val(); if (isNotBlank(url)) { if (!url.toLowerCase().startsWith('http://') && !url.toLowerCase().startsWith('https://')) { url = location.protocol + '//' + url; } localStorage.setItem(localServerPathItem, url); $('#config-prefix').modal('hide'); loadMulti(); } } function addLine(html) { if (isBlank(html)) { return ''; } var lineHtml = '<div class="line-number">'; var i, lineNum = html.split(/\n/).length; for (i = 1; i <= lineNum; i++) { lineHtml += '<div>' + i + '</div>'; } lineHtml += '</div>'; return lineHtml + '<div class="source">' + html + '</div>'; } function escapeHtml(html) { return isBlank(html) ? null : html.replace(/</g, '&lt;').replace(/>/g, '&gt;'); } function getDomain() { var url = localStorage.getItem(localServerPathItem); return isBlank(url) ? (location.protocol + '//' + location.host) : url; } function getProjectDomain() { var url = localStorage.getItem(localServerPathItem); if (isNotBlank(url)) { return url; } var projectDomain = $('.project-choose').find('option:selected').data('url'); return isBlank(projectDomain) ? (location.protocol + '//' + location.host) : projectDomain; } var chooseProjectTemplate = doT.template($('#choose-project').html()); var copyrightTemplate = doT.template($('#copyright').html()); var urlRenderTemplate = doT.template($('#url-render').html()); var navRenderTemplate = doT.template($('#url-nav-render').html()); loadMulti(); function loadMulti() { $.get(getDomain() + '/api/project').done(function (data) { if (isNotBlank(data)) { var projectInfo = ((typeof data === 'string') ? JSON.parse(data) : data); if (isNotBlank(projectInfo)) { var project = location.search; var param = 'p=', append = '&'; if (project.includes(param)) { project = project.substring(project.indexOf(param) + param.length); if (project.includes(append)) { project = project.substring(0, project.indexOf(append)); } } $(".header").append(chooseProjectTemplate({"project": project, "projects": projectInfo})); } } loadData(); }).fail(function () { loadData(); }); } function loadData() { var $title = $('title'); var $headerContent = $('.header-content'); var $footer = $('footer'); var $urlInfo = $('#url-info'); var $urlNavInfo = $('#url-nav-info'); var $rightArrow = $('.right-arrow'); $title.html(''); $headerContent.html(''); $footer.html(''); $urlInfo.html(''); $urlNavInfo.html(''); var method = 'GET'; var apiInfo = '/api/info'; var projectDomain = getProjectDomain(); var requestUrl = projectDomain.endsWith(apiInfo) ? projectDomain : ((projectDomain.endsWith('/') ? projectDomain.substring(0, projectDomain.length - 1) : projectDomain) + apiInfo); $.ajax({ method: method, url: requestUrl, crossDomain: true }).done(function(data) { if (isNotBlank(data)) { var documentInfo = ((typeof data === 'string') ? JSON.parse(data) : data); var copyright = documentInfo.copyright; if (isBlank(copyright)) { handleError($rightArrow, $urlInfo, 'Return data error!'); return; } var title = copyright.title; if (isNotBlank(title)) { $title.html(title); $headerContent.html(title); } $footer.html(copyrightTemplate(copyright)); var doc = documentInfo.document; if (isBlank(doc)) { return; } $urlInfo.html(urlRenderTemplate(doc)); $urlNavInfo.html(navRenderTemplate(doc)); $('.bs-docs-sidebar > .nav').css('max-height', 'calc(100vh - 51px - 15px - 15px)'); $rightArrow.css('display', ''); $('pre[class="src src-json"]').each(function() { var $html = escapeHtml($(this).html()); var html; if (isNotBlank($html)) { html = $html.replace(/(.*?)(\/\*.*?\*\/)/g, '$1<span class="comment">$2</span>'); var recursiveRegex = /(!!!RECURSIVE OBJECT!!!)/; if (recursiveRegex.test($html)) { html = html.replace(new RegExp(recursiveRegex, 'g'), '<span class="bold red">$1</span>'); } } else { html = '<span class="red">Return null or Can not analyze return type</span>'; } $(this).html(addLine(html)); }); if ($('.col-md-3').css('display') !== 'none') { var hash = location.hash; if (isNotBlank(hash)) { var $anchor = $(hash); if ($anchor.length > 0) { var $li = $('a[href="' + hash + '"]').parents('li'); $li.addClass('active'); $li.parents('li').addClass('active'); $('html,body').animate({scrollTop: $anchor.offset().top}, 0); } } } } else { $urlInfo.html('<span class="red">No api info</span>'); } }).fail(function(error) { console.error(method + ' ' + requestUrl + ' error: ' + JSON.stringify(error)); handleError($rightArrow, $urlInfo, 'Request error, Incorrect network or cross-domain error!'); }); } function handleError($arrow, $ele, info) { $arrow.css('display', 'none'); $ele.html('<div class="config red">' + info + '</div>' + '<div class="config">context-path error? ' + '<span class="config-prefix" data-toggle="modal" data-target="#config-prefix">config</span> ' + '<span id="delete-prefix" class="config-prefix">delete config</span></div>'); } $(function() { var linked = 1; $(document.body).scrollspy({target: '.bs-docs-sidebar'}); $(document).on('change', '.project-choose', function() { linked = 2; var projectUrl = $(this).find('option:selected').data('url'); var hash = isBlank(projectUrl) ? '' : ('?p=' + $(this).val()); history.replaceState({api: $(this).val()}, '', location.pathname + hash); loadData(); }); $(document).on('click', '.right-arrow', function() { var $nav = $('.col-md-3'); var $content = $('.col-md-9'); var $img = $(this).find('.img'); if (String($img.attr('style')).includes('rotate(180deg)')) { $img.css('transform', ''); $nav.css('width', ''); $content.css('width', ''); } else { $img.css('transform', 'rotate(180deg)'); $nav.css('width', '0'); $content.css('width', '100%'); } }); $(document).on('click', '#delete-prefix', function() { localStorage.removeItem(localServerPathItem); }); $(document).on('keydown', '#prefix-url', function(e) { if (hasEnter(e)) { newRequest(); } }); $(document).on('click', '.config-btn', function() { newRequest(); }); $(document).on('click', '.copy', function() { var $this = $(this); var copyValue = $this.next().find('.source').html().replace(/<span class=".*?">|<\/span>/g, ''); var copyElement = document.createElement('textarea'); copyElement.setAttribute('readonly', 'readonly'); copyElement.setAttribute('class', 'copy-impl'); $(copyElement).html(copyValue); var $parent = $this.parent()[0]; $parent.appendChild(copyElement); copyElement.setSelectionRange(0, copyValue.length); copyElement.select(); var flag = document.execCommand('copy'); $parent.removeChild(copyElement); var $copyStatus = $this.prev(); $copyStatus.text('Copy ' + (flag ? 'Success' : 'Fail')); setTimeout(function() { $copyStatus.text(''); }, 2000); }); $(window).scroll(function() { var headerHeight = 51; var topBottomHeight = 30; var scrolled = 'scrolled'; var heightProperty = 'max-height'; var html = document.getElementsByTagName('html')[0]; var footer = document.getElementsByTagName('footer')[0]; var $win = $(window); var $nav = $('.col-md-3'); var $bar = $('.bs-docs-sidebar > .nav'); var $header = $('header'); var scrollTop = $win.scrollTop(); if (scrollTop > 0) { if (!$header.hasClass(scrolled)) { $header.addClass(scrolled); } } else { $header.removeClass(scrolled); } if ($nav.css('display') !== 'none') { var footerTop = footer.offsetTop; var pageHeight = scrollTop + $win.height(); if (footerTop >= scrollTop && footerTop < pageHeight) { var footViewHeight = pageHeight - footerTop; $bar.css(heightProperty, 'calc(100vh - ' + (headerHeight + topBottomHeight + footViewHeight) + 'px)'); } else { var htmlViewHeight = (html.clientHeight - headerHeight - topBottomHeight) + 'px'; if ($bar.css(heightProperty) !== htmlViewHeight) { $bar.css(heightProperty, 'calc(100vh - ' + (headerHeight + topBottomHeight) + 'px)'); } } var navHash = $nav.find('.active > a:last').attr('href'); var currentHash = location.hash; if (navHash !== currentHash) { var url = location.pathname + location.search; if (isBlank(navHash)) { if ($header.hasClass(scrolled) !== true) { history.replaceState({api: 'index'}, '', url); } if (linked === 1) { linked = 0; var $anchor = $(currentHash); if ($anchor.length > 0) { var $li = $('a[href="' + currentHash + '"]').parents('li'); if (!$li.hasClass('active')) { $li.addClass('active'); } } } else if (linked === 2) { linked = 1; } } else { history.replaceState({api: navHash}, '', url + navHash); } } } }); }); </script> </body> </html>
